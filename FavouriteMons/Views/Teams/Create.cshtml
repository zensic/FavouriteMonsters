@{
  var userId = ViewData["UserId"];
}

<h1>Create a new team</h1>

<hr />
<div class="container">
  <h3>Your team</h3>
  <div id="monsters-selected" class="row row-cols-md-6 row-cols-sm-4" ">
    <div id="plus-selection" class="monster-selected">
      <i id="plus" class="bi bi-plus-lg" style="font-size: 2rem"></i>
    </div>
  </div>
  <div class="row">
    <h3>Add a Monster</h3>
    @foreach (var monster in ViewBag.monsters)
    {
    <button onclick="handleClick('@monster["id"]', '@monster["url"]', '@monster["name"]', '@monster["element"]')" class="monster-selection">
      <div>
        <img src="@monster["url"]" />
      </div>
      <div>
        <div>@monster["name"]</div>
        <div class="monster-type" style="background-color: @monster["color"]">@monster["element"]</div>
      </div>
    </button>
    }
  </div>
</div>


@section Scripts {
  @{
    await Html.RenderPartialAsync("_ValidationScriptsPartial");
  }
<script>
  let teamArray = [];

  const handleRemove = (id) => {
      console.log("Removed " + id);
      console.log(teamArray);

      for (let i = 0; i < teamArray.length; i++) {
          if (teamArray[i].id == id) {
              // Removes the item from the teams array
              teamArray.splice(i, 1);
              $("#" + id).remove();

              return;
          }
      };

      console.log(teamArray);
  }

  const handleClick = (id, url, name, element) => {

      if (teamArray.length > 5)
          return 0;

      teamArray.push({ id, 'url': url, 'name': name, 'element ': element });

      let component = $('<button/>', { 'id': id, 'class': 'monster-selected' })
          .append(
              $('<img />', { 'src': url, 'class': "new-monster-img", 'alt': 'Monster Image' })
          )
          .append(
              $('<div />').text(name)
          );

      $(component).insertBefore('#plus-selection');
      $('#' + id).click(() => { handleRemove(id) });
  }
</script>
}